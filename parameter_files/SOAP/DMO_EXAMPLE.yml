# Values in this section are substituted into the other sections
# The simulation name (box size and resolution) and snapshot will be appended
# to these to get the full name of the input/output files/directories
Parameters:
  sim_dir: ./outputs/SWIFT/
  output_dir: ./outputs/SOAP/
  scratch_dir: ./outputs/SOAP/

# Location of the Swift snapshots:
Snapshots:
  # Use {snap_nr:04d} for the snapshot number and {file_nr} for the file number.
  filename: "{sim_dir}/snap_{snap_nr:04d}.hdf5"

# Which halo finder we're using, and base name for halo finder output files
HaloFinder:
  type: HBTplus
  filename: "./outputs/HBT-HERONS/{snap_nr:03d}/SubSnap_{snap_nr:03d}"

GroupMembership:
  # Where to write the group membership files
  filename: "{output_dir}/membership_{snap_nr:04d}/membership_{snap_nr:04d}.hdf5"

HaloProperties:
  # Where to write the halo properties file
  filename: "{output_dir}/SOAP_uncompressed/{halo_finder}/halo_properties_{snap_nr:04d}.hdf5"
  # Where to write temporary chunk output
  chunk_dir: "{scratch_dir}/{sim_name}/SOAP-tmp/{halo_finder}/"

ApertureProperties:
  properties:
    AngularMomentumDarkMatter: dm
    CentreOfMass: basic
    CentreOfMassVelocity: basic
    DarkMatterMass: basic
    HalfMassRadiusDarkMatter: dm
    NumberOfDarkMatterParticles: basic
    TotalMass: basic
  variations:
    exclusive_100_kpc:
      inclusive: false
      radius_in_kpc: 100.0
    exclusive_10_kpc:
      inclusive: false
      radius_in_kpc: 10.0
    exclusive_300kpc:
      inclusive: false
      radius_in_kpc: 300.0
    inclusive_100_kpc:
      inclusive: true
      radius_in_kpc: 100.0
    inclusive_10_kpc:
      inclusive: true
      radius_in_kpc: 10.0
    inclusive_300kpc:
      inclusive: true
      radius_in_kpc: 300.0
ProjectedApertureProperties:
  properties:
    CentreOfMass: basic
    CentreOfMassVelocity: basic
    DarkMatterMass: basic
    DarkMatterProjectedVelocityDispersion: dm
    HalfMassRadiusDarkMatter: dm
    NumberOfDarkMatterParticles: basic
    ProjectedTotalInertiaTensorNoniterative: general
    ProjectedTotalInertiaTensorReducedNoniterative: general
    TotalMass: basic
  variations:
    100_kpc:
      radius_in_kpc: 100.0
      filter: general
    10_kpc:
      radius_in_kpc: 10.0
      filter: general
    30_kpc:
      radius_in_kpc: 30.0
      filter: general
SOProperties:
  properties:
    AngularMomentumDarkMatter: dm
    CentreOfMass: basic
    CentreOfMassVelocity: basic
    Concentration: basic
    ConcentrationUnsoftened: basic
    DarkMatterMass: basic
    DarkMatterConcentration: basic
    DarkMatterConcentrationUnsoftened: basic
    MassFractionSatellites: general
    MassFractionExternal: general
    NumberOfDarkMatterParticles: basic
    SORadius: basic
    SpinParameter: general
    TotalInertiaTensorNoniterative: general
    DarkMatterInertiaTensorNoniterative: dm
    TotalInertiaTensorReducedNoniterative: general
    DarkMatterInertiaTensorReducedNoniterative: dm
    MaximumCircularVelocity: basic
    MaximumCircularVelocityRadius: basic
    TotalMass: basic
  variations:
    200_crit:
      type: crit
      value: 200.0
    200_mean:
      type: mean
      value: 200.0
    500_crit:
      type: crit
      value: 500.0
    5xR500_crit:
      type: crit
      value: 500.0
      radius_multiple: 5.0
      filter: general
    BN98:
      type: BN98
      value: 0.0
      filter: general
SubhaloProperties:
  properties:
    AngularMomentumDarkMatter: dm
    CentreOfMass: basic
    CentreOfMassVelocity: basic
    DarkMatterMass: basic
    DarkMatterVelocityDispersionMatrix: dm
    HalfMassRadiusDarkMatter: dm
    HalfMassRadiusTotal: general
    EncloseRadius: basic
    MaximumCircularVelocity: basic
    MaximumCircularVelocityRadiusUnsoftened: basic
    MaximumCircularVelocityUnsoftened: basic
    NumberOfDarkMatterParticles: basic
    TotalInertiaTensor: general
    TotalInertiaTensorReduced: general
    TotalInertiaTensorNoniterative: general
    TotalInertiaTensorReducedNoniterative: general
    SpinParameter: general
    TotalMass: basic
aliases:
  PartType0/ElementMassFractions: PartType0/SmoothedElementMassFractions
  PartType4/ElementMassFractions: PartType4/SmoothedElementMassFractions
filters:
  general:
    limit: 100
    properties:
      - BoundSubhalo/NumberOfGasParticles
      - BoundSubhalo/NumberOfDarkMatterParticles
      - BoundSubhalo/NumberOfStarParticles
      - BoundSubhalo/NumberOfBlackHoleParticles
    combine_properties: sum
  baryon:
    limit: 100
    properties:
      - BoundSubhalo/NumberOfGasParticles
      - BoundSubhalo/NumberOfStarParticles
    combine_properties: sum
  dm:
    limit: 100
    properties:
      - BoundSubhalo/NumberOfDarkMatterParticles
  gas:
    limit: 100
    properties:
      - BoundSubhalo/NumberOfGasParticles
  star:
    limit: 100
    properties:
      - BoundSubhalo/NumberOfStarParticles
defined_constants:
  O_H_sun: 4.9e-4
  Fe_H_sun: 2.82e-5
calculations:
  min_read_radius_cmpc: 5
  calculate_missing_properties: false
  reduced_snapshots:
    min_halo_mass: 1e13
    halo_bin_size_dex: .05
    halos_per_bin: 200
  recently_heated_gas_filter:
    delta_time_myr: 15
    use_AGN_delta_T: true
